{"ast":null,"code":"var _jsxFileName = \"F:\\\\news aggregator\\\\News-API\\\\News-API\\\\frontend\\\\src\\\\components\\\\News.js\";\n// frontend/src/components/News.js\nimport React, { Component } from \"react\";\nimport NewsUpdate from \"./NewsUpdate\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport { checkIfFakeNews } from \"../services/api\";\nimport \"./News.css\";\nimport \"./Search.css\"; // Import the new CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor() {\n    super();\n    this.nextClick = () => {\n      this.setState({\n        page: this.state.page + 1\n      }, this.updateNews);\n    };\n    this.previousClick = () => {\n      this.setState({\n        page: this.state.page - 1\n      }, this.updateNews);\n    };\n    this.handleSearchInput = event => {\n      this.setState({\n        searchTerm: event.target.value\n      });\n    };\n    this.filterArticles = () => {\n      const {\n        articles,\n        searchTerm\n      } = this.state;\n      return articles.filter(article => article.title.toLowerCase().includes(searchTerm.toLowerCase()));\n    };\n    this.state = {\n      articles: [],\n      loading: true,\n      page: 1,\n      totalResults: 0,\n      searchTerm: \"\"\n    };\n  }\n  async detectFakeNews(articles) {\n    const updatedArticles = await Promise.all(articles.map(async article => {\n      const result = await checkIfFakeNews(article.description || \"\");\n      return {\n        ...article,\n        isFake: result.is_fake\n      };\n    }));\n    return updatedArticles;\n  }\n  async updateNews() {\n    this.setState({\n      loading: true\n    });\n    const {\n      category,\n      api_key\n    } = this.props;\n    const url = `https://newsapi.org/v2/top-headlines?&language=en&category=${category}&apiKey=${api_key}&page=${this.state.page}&pageSize=12`;\n    try {\n      const data = await fetch(url);\n      const parsedData = await data.json();\n\n      // Check if articles array exists before processing\n      if (!parsedData.articles) {\n        console.error(\"No articles found\");\n        this.setState({\n          articles: [],\n          loading: false\n        });\n        return;\n      }\n      const articlesWithFakeStatus = await this.detectFakeNews(parsedData.articles);\n      this.setState({\n        articles: articlesWithFakeStatus,\n        totalResults: parsedData.totalResults,\n        loading: false\n      });\n    } catch (error) {\n      console.error(\"Error fetching news:\", error);\n      this.setState({\n        loading: false\n      });\n    }\n  }\n  componentDidMount() {\n    this.updateNews();\n  }\n  render() {\n    const filteredArticles = this.filterArticles();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"TOP HEADLINES\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), this.props.category === \"general\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search news...\",\n          value: this.state.searchTerm,\n          onChange: this.handleSearchInput,\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), this.state.loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: !this.state.loading && filteredArticles.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(NewsUpdate, {\n            title: element.title,\n            newsUrl: element.url,\n            description: element.description ? element.description.slice(0, 100) : \"\",\n            imgUrl: element.urlToImage,\n            source: element.source.name,\n            author: element.author,\n            isFake: element.isFake\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)\n        }, element.url, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: this.state.page <= 1,\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.previousClick,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"Total Results: \", this.state.totalResults]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: this.state.page + 1 > Math.ceil(this.state.totalResults / 12),\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.nextClick,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n}\nNews.defaultProps = {\n  category: \"general\"\n};\nNews.propTypes = {\n  category: PropTypes.string,\n  api_key: PropTypes.string.isRequired // Ensure API key is passed\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsUpdate","Spinner","PropTypes","checkIfFakeNews","jsxDEV","_jsxDEV","News","constructor","nextClick","setState","page","state","updateNews","previousClick","handleSearchInput","event","searchTerm","target","value","filterArticles","articles","filter","article","title","toLowerCase","includes","loading","totalResults","detectFakeNews","updatedArticles","Promise","all","map","result","description","isFake","is_fake","category","api_key","props","url","data","fetch","parsedData","json","console","error","articlesWithFakeStatus","componentDidMount","render","filteredArticles","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","element","newsUrl","slice","imgUrl","urlToImage","source","name","author","disabled","onClick","Math","ceil","defaultProps","propTypes","string","isRequired"],"sources":["F:/news aggregator/News-API/News-API/frontend/src/components/News.js"],"sourcesContent":["// frontend/src/components/News.js\nimport React, { Component } from \"react\";\nimport NewsUpdate from \"./NewsUpdate\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport { checkIfFakeNews } from \"../services/api\";\nimport \"./News.css\";\nimport \"./Search.css\"; // Import the new CSS file\n\nexport class News extends Component {\n  static defaultProps = {\n    category: \"general\",\n  };\n\n  static propTypes = {\n    category: PropTypes.string,\n    api_key: PropTypes.string.isRequired, // Ensure API key is passed\n  };\n\n  constructor() {\n    super();\n    this.state = {\n      articles: [],\n      loading: true,\n      page: 1,\n      totalResults: 0,\n      searchTerm: \"\",\n    };\n  }\n\n  async detectFakeNews(articles) {\n    const updatedArticles = await Promise.all(\n      articles.map(async (article) => {\n        const result = await checkIfFakeNews(article.description || \"\");\n        return { ...article, isFake: result.is_fake };\n      })\n    );\n    return updatedArticles;\n  }\n\n  async updateNews() {\n    this.setState({ loading: true });\n    const { category, api_key } = this.props;\n    const url = `https://newsapi.org/v2/top-headlines?&language=en&category=${category}&apiKey=${api_key}&page=${this.state.page}&pageSize=12`;\n\n    try {\n      const data = await fetch(url);\n      const parsedData = await data.json();\n\n      // Check if articles array exists before processing\n      if (!parsedData.articles) {\n        console.error(\"No articles found\");\n        this.setState({ articles: [], loading: false });\n        return;\n      }\n\n      const articlesWithFakeStatus = await this.detectFakeNews(parsedData.articles);\n\n      this.setState({\n        articles: articlesWithFakeStatus,\n        totalResults: parsedData.totalResults,\n        loading: false,\n      });\n    } catch (error) {\n      console.error(\"Error fetching news:\", error);\n      this.setState({ loading: false });\n    }\n  }\n\n  componentDidMount() {\n    this.updateNews();\n  }\n\n  nextClick = () => {\n    this.setState({ page: this.state.page + 1 }, this.updateNews);\n  };\n\n  previousClick = () => {\n    this.setState({ page: this.state.page - 1 }, this.updateNews);\n  };\n\n  handleSearchInput = (event) => {\n    this.setState({ searchTerm: event.target.value });\n  };\n\n  filterArticles = () => {\n    const { articles, searchTerm } = this.state;\n    return articles.filter((article) =>\n      article.title.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  };\n\n  render() {\n    const filteredArticles = this.filterArticles();\n\n    return (\n      <div className=\"container my-3\">\n        <h2 className=\"text-center\">TOP HEADLINES</h2>\n\n        {this.props.category === \"general\" && (\n          <div className=\"search-bar\">\n            <input\n              type=\"text\"\n              placeholder=\"Search news...\"\n              value={this.state.searchTerm}\n              onChange={this.handleSearchInput}\n              className=\"search-input\"\n            />\n          </div>\n        )}\n\n        {this.state.loading && <Spinner />}\n\n        <div className=\"row\">\n          {!this.state.loading &&\n            filteredArticles.map((element) => (\n              <div className=\"col-md-4\" key={element.url}>\n                <NewsUpdate\n                  title={element.title}\n                  newsUrl={element.url}\n                  description={\n                    element.description ? element.description.slice(0, 100) : \"\"\n                  }\n                  imgUrl={element.urlToImage}\n                  source={element.source.name}\n                  author={element.author}\n                  isFake={element.isFake}\n                />\n              </div>\n            ))}\n        </div>\n\n        <div className=\"container d-flex justify-content-between\">\n          <button\n            disabled={this.state.page <= 1}\n            type=\"button\"\n            className=\"btn btn-dark\"\n            onClick={this.previousClick}\n          >\n            Previous\n          </button>\n          <h5>Total Results: {this.state.totalResults}</h5>\n          <button\n            disabled={this.state.page + 1 > Math.ceil(this.state.totalResults / 12)}\n            type=\"button\"\n            className=\"btn btn-dark\"\n            onClick={this.nextClick}\n          >\n            Next\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default News;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
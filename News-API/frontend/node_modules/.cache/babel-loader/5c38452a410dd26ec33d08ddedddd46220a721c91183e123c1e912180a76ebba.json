{"ast":null,"code":"var _jsxFileName = \"F:\\\\news aggregator\\\\News-API\\\\News-API\\\\frontend\\\\src\\\\components\\\\News.js\";\n// frontend/src/components/News.js\nimport React, { Component } from \"react\";\nimport NewsUpdate from \"./NewsUpdate\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport { checkIfFakeNews } from \"../services/api\";\nimport \"./News.css\";\nimport \"./Search.css\"; // Import the new CSS file for the search bar\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class News extends Component {\n  constructor() {\n    super();\n    this.nextClick = () => {\n      this.setState({\n        page: this.state.page + 1\n      }, this.updateNews);\n    };\n    this.previousClick = () => {\n      this.setState({\n        page: this.state.page - 1\n      }, this.updateNews);\n    };\n    this.handleSearchInput = event => {\n      this.setState({\n        searchTerm: event.target.value\n      });\n    };\n    // Filters articles based on the search term\n    this.filterArticles = () => {\n      const {\n        articles,\n        searchTerm\n      } = this.state;\n      return articles.filter(article => article.title.toLowerCase().includes(searchTerm.toLowerCase()));\n    };\n    this.state = {\n      articles: [],\n      loading: true,\n      page: 1,\n      totalResults: 0,\n      searchTerm: \"\" // Track search input\n    };\n  }\n\n  // Detects fake news and updates article statuses\n  async detectFakeNews(articles) {\n    const updatedArticles = await Promise.all(articles.map(async article => {\n      const result = await checkIfFakeNews(article.description || \"\");\n      return {\n        ...article,\n        isFake: result.is_fake\n      };\n    }));\n    return updatedArticles;\n  }\n\n  // Fetches news data from API based on current page, category, and country\n  async updateNews() {\n    this.setState({\n      loading: true\n    });\n    const {\n      category,\n      api_key,\n      country\n    } = this.props;\n    const url = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&apiKey=${api_key}&page=${this.state.page}&pageSize=12`;\n    let data = await fetch(url);\n    let parsedData = await data.json();\n    const articlesWithFakeStatus = await this.detectFakeNews(parsedData.articles);\n    this.setState({\n      articles: articlesWithFakeStatus,\n      totalResults: parsedData.totalResults,\n      loading: false\n    });\n  }\n  async componentDidMount() {\n    this.updateNews();\n  }\n  render() {\n    const filteredArticles = this.filterArticles();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"TOP HEADLINES\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), this.props.category === \"general\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search news...\",\n          value: this.state.searchTerm,\n          onChange: this.handleSearchInput,\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), this.state.loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: !this.state.loading && filteredArticles.map(article => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(NewsUpdate, {\n            title: article.title,\n            newsUrl: article.url,\n            description: article.description ? article.description.slice(0, 100) : \"\",\n            imgUrl: article.urlToImage,\n            source: article.source.name,\n            author: article.author,\n            isFake: article.isFake\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this)\n        }, article.url, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: this.state.page <= 1,\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.previousClick,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: [\"Total Results: \", this.state.totalResults]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: this.state.page + 1 > Math.ceil(this.state.totalResults / 12),\n          type: \"button\",\n          className: \"btn btn-dark\",\n          onClick: this.nextClick,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n}\nNews.defaultProps = {\n  category: \"general\",\n  country: \"us\" // Default country\n};\nNews.propTypes = {\n  category: PropTypes.string,\n  api_key: PropTypes.string.isRequired,\n  country: PropTypes.string\n};\nexport default News;","map":{"version":3,"names":["React","Component","NewsUpdate","Spinner","PropTypes","checkIfFakeNews","jsxDEV","_jsxDEV","News","constructor","nextClick","setState","page","state","updateNews","previousClick","handleSearchInput","event","searchTerm","target","value","filterArticles","articles","filter","article","title","toLowerCase","includes","loading","totalResults","detectFakeNews","updatedArticles","Promise","all","map","result","description","isFake","is_fake","category","api_key","country","props","url","data","fetch","parsedData","json","articlesWithFakeStatus","componentDidMount","render","filteredArticles","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","newsUrl","slice","imgUrl","urlToImage","source","name","author","disabled","onClick","Math","ceil","defaultProps","propTypes","string","isRequired"],"sources":["F:/news aggregator/News-API/News-API/frontend/src/components/News.js"],"sourcesContent":["// frontend/src/components/News.js\nimport React, { Component } from \"react\";\nimport NewsUpdate from \"./NewsUpdate\";\nimport Spinner from \"./Spinner\";\nimport PropTypes from \"prop-types\";\nimport { checkIfFakeNews } from \"../services/api\";\nimport \"./News.css\";\nimport \"./Search.css\"; // Import the new CSS file for the search bar\n\nexport class News extends Component {\n  static defaultProps = {\n    category: \"general\",\n    country: \"us\", // Default country\n  };\n\n  static propTypes = {\n    category: PropTypes.string,\n    api_key: PropTypes.string.isRequired,\n    country: PropTypes.string,\n  };\n\n  constructor() {\n    super();\n    this.state = {\n      articles: [],\n      loading: true,\n      page: 1,\n      totalResults: 0,\n      searchTerm: \"\", // Track search input\n    };\n  }\n\n  // Detects fake news and updates article statuses\n  async detectFakeNews(articles) {\n    const updatedArticles = await Promise.all(\n      articles.map(async (article) => {\n        const result = await checkIfFakeNews(article.description || \"\");\n        return { ...article, isFake: result.is_fake };\n      })\n    );\n    return updatedArticles;\n  }\n\n  // Fetches news data from API based on current page, category, and country\n  async updateNews() {\n    this.setState({ loading: true });\n    const { category, api_key, country } = this.props;\n    const url = `https://newsapi.org/v2/top-headlines?country=${country}&category=${category}&apiKey=${api_key}&page=${this.state.page}&pageSize=12`;\n\n    let data = await fetch(url);\n    let parsedData = await data.json();\n\n    const articlesWithFakeStatus = await this.detectFakeNews(parsedData.articles);\n\n    this.setState({\n      articles: articlesWithFakeStatus,\n      totalResults: parsedData.totalResults,\n      loading: false,\n    });\n  }\n\n  async componentDidMount() {\n    this.updateNews();\n  }\n\n  nextClick = () => {\n    this.setState({ page: this.state.page + 1 }, this.updateNews);\n  };\n\n  previousClick = () => {\n    this.setState({ page: this.state.page - 1 }, this.updateNews);\n  };\n\n  handleSearchInput = (event) => {\n    this.setState({ searchTerm: event.target.value });\n  };\n\n  // Filters articles based on the search term\n  filterArticles = () => {\n    const { articles, searchTerm } = this.state;\n    return articles.filter((article) =>\n      article.title.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  };\n\n  render() {\n    const filteredArticles = this.filterArticles();\n\n    return (\n      <div className=\"container my-3\">\n        <h2 className=\"text-center\">TOP HEADLINES</h2>\n\n        {/* Search bar shown only when category is \"general\" */}\n        {this.props.category === \"general\" && (\n          <div className=\"search-bar\">\n            <input\n              type=\"text\"\n              placeholder=\"Search news...\"\n              value={this.state.searchTerm}\n              onChange={this.handleSearchInput}\n              className=\"search-input\"\n            />\n          </div>\n        )}\n\n        {this.state.loading && <Spinner />}\n\n        <div className=\"row\">\n          {!this.state.loading &&\n            filteredArticles.map((article) => (\n              <div className=\"col-md-4\" key={article.url}>\n                <NewsUpdate\n                  title={article.title}\n                  newsUrl={article.url}\n                  description={article.description ? article.description.slice(0, 100) : \"\"}\n                  imgUrl={article.urlToImage}\n                  source={article.source.name}\n                  author={article.author}\n                  isFake={article.isFake}\n                />\n              </div>\n            ))}\n        </div>\n\n        <div className=\"container d-flex justify-content-between\">\n          <button\n            disabled={this.state.page <= 1}\n            type=\"button\"\n            className=\"btn btn-dark\"\n            onClick={this.previousClick}\n          >\n            Previous\n          </button>\n          <h5>Total Results: {this.state.totalResults}</h5>\n          <button\n            disabled={this.state.page + 1 > Math.ceil(this.state.totalResults / 12)}\n            type=\"button\"\n            className=\"btn btn-dark\"\n            onClick={this.nextClick}\n          >\n            Next\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default News;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}